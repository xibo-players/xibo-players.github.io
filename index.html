<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xibo Players — Open-source digital signage players</title>
    <meta name="description" content="Open-source digital signage players for Xibo CMS. PWA, Electron, Chromium kiosk, and pre-built bootable images for PCs and Raspberry Pi.">
    <style>
        :root {
            --blue: #0969da;
            --blue-dark: #0550ae;
            --green: #1a7f37;
            --orange: #bf5700;
            --purple: #6639ba;
            --rust: #b7410e;
            --gray-50: #f6f8fa;
            --gray-100: #eaeef2;
            --gray-200: #d0d7de;
            --gray-500: #656d76;
            --gray-700: #32383f;
            --gray-900: #1f2328;
            --card-bg: #fff;
            --pre-bg: #24292e;
            --pre-fg: #e6edf3;
            --code-bg: #eef;
            --info-bg: #ddf4ff;
            --info-border: #b6e3ff;
            --info-color: #0550ae;
            --badge-rpm-bg: #ddf4ff;
            --badge-rpm-border: #b6e3ff;
            --badge-rpm-color: #0550ae;
            --badge-deb-bg: #dafbe1;
            --badge-deb-border: #aceebb;
            --badge-deb-color: #116329;
            --badge-arch-bg: #fff8c5;
            --badge-arch-border: #eac54f;
            --badge-arch-color: #6a5901;
            --badge-soon-bg: #fff3cd;
            --badge-soon-border: #eed079;
            --badge-soon-color: #856404;
            --radius: 8px;
        }
        [data-theme="dark"] {
            --blue: #58a6ff;
            --blue-dark: #388bfd;
            --green: #3fb950;
            --gray-50: #0d1117;
            --gray-100: #161b22;
            --gray-200: #30363d;
            --gray-500: #8b949e;
            --gray-700: #c9d1d9;
            --gray-900: #e6edf3;
            --card-bg: #161b22;
            --pre-bg: #0d1117;
            --pre-fg: #c9d1d9;
            --code-bg: #1c2333;
            --info-bg: #0d1f3c;
            --info-border: #1f3d6e;
            --info-color: #58a6ff;
            --badge-rpm-bg: #0d1f3c;
            --badge-rpm-border: #1f3d6e;
            --badge-rpm-color: #58a6ff;
            --badge-deb-bg: #0d2818;
            --badge-deb-border: #1a4731;
            --badge-deb-color: #3fb950;
            --badge-arch-bg: #2a2000;
            --badge-arch-border: #4d3e00;
            --badge-arch-color: #e3b341;
            --badge-soon-bg: #2a2000;
            --badge-soon-border: #4d3e00;
            --badge-soon-color: #e3b341;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans', sans-serif;
            color: var(--gray-900);
            background: var(--gray-50);
            line-height: 1.6;
        }

        /* Hero */
        .hero {
            background: linear-gradient(135deg, #0550ae 0%, #0969da 50%, #218bff 100%);
            color: #fff;
            padding: 56px 20px 48px;
            text-align: center;
        }
        [data-theme="dark"] .hero {
            background: linear-gradient(135deg, #0a1929 0%, #0d2240 50%, #0f2d5e 100%);
        }
        .hero h1 { font-size: 2.4em; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.02em; }
        .hero p { font-size: 1.15em; opacity: 0.9; max-width: 560px; margin: 0 auto 24px; }
        .hero-links a {
            display: inline-block;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 6px;
            padding: 6px 16px;
            margin: 4px;
            font-size: 0.9em;
            text-decoration: none;
            transition: background 0.15s;
        }
        .hero-links a:hover { background: rgba(255,255,255,0.15); }
        .disclaimer {
            max-width: 540px;
            margin: 20px auto 0;
            padding: 10px 16px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            font-size: 0.8em;
            opacity: 0.75;
            line-height: 1.5;
        }

        /* Nav tabs */
        .nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0;
            background: var(--card-bg);
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .nav a {
            padding: 14px 18px;
            text-decoration: none;
            color: var(--gray-500);
            font-weight: 500;
            font-size: 0.9em;
            border-bottom: 2px solid transparent;
            transition: color 0.15s, border-color 0.15s;
            white-space: nowrap;
        }
        .nav a:hover, .nav a.active { color: var(--blue); border-bottom-color: var(--blue); }

        /* Main content */
        .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }
        section { padding: 40px 0; }
        section + section { border-top: 1px solid var(--gray-100); }

        h2 {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 8px;
        }
        .section-desc { color: var(--gray-500); margin-bottom: 20px; }

        /* Package grid */
        .pkg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .pkg-card {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: box-shadow 0.15s, border-color 0.15s;
            text-decoration: none;
            color: inherit;
        }
        .pkg-card:hover { border-color: var(--blue); box-shadow: 0 2px 12px rgba(9,105,218,0.1); }
        .pkg-card h3 {
            font-size: 1.05em;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pkg-card h3 .icon { font-size: 1.3em; }
        .pkg-card .desc { color: var(--gray-500); font-size: 0.9em; flex: 1; }
        .pkg-card .meta {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .badge {
            display: inline-block;
            font-size: 0.78em;
            font-weight: 500;
            padding: 2px 8px;
            border-radius: 12px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            color: var(--gray-700);
        }
        .badge.rpm { background: var(--badge-rpm-bg); border-color: var(--badge-rpm-border); color: var(--badge-rpm-color); }
        .badge.deb { background: var(--badge-deb-bg); border-color: var(--badge-deb-border); color: var(--badge-deb-color); }
        .badge.arch { background: var(--badge-arch-bg); border-color: var(--badge-arch-border); color: var(--badge-arch-color); }

        /* Player cards — wider layout for the 5 players */
        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .player-card {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: box-shadow 0.15s, border-color 0.15s;
            text-decoration: none;
            color: inherit;
        }
        .player-card:hover { border-color: var(--blue); box-shadow: 0 2px 12px rgba(9,105,218,0.1); }
        .player-card h3 {
            font-size: 1.05em;
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .player-card h3 .icon { font-size: 1.3em; }
        .player-card .player-mono {
            font-family: 'SF Mono', SFMono-Regular, ui-monospace, Menlo, monospace;
            font-size: 0.8em;
            color: var(--gray-500);
            margin-bottom: 8px;
        }
        .player-card .desc { color: var(--gray-500); font-size: 0.9em; flex: 1; }
        .player-card .meta {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .player-card.featured {
            border-color: var(--blue);
            border-width: 2px;
            position: relative;
        }
        .player-card.featured::before {
            content: 'Engine';
            position: absolute;
            top: -9px;
            right: 16px;
            background: var(--blue);
            color: #fff;
            font-size: 0.7em;
            font-weight: 600;
            padding: 1px 8px;
            border-radius: 4px;
            letter-spacing: 0.03em;
        }

        /* Getting started cards */
        .gs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .gs-card {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 20px;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            transition: box-shadow 0.15s, border-color 0.15s;
        }
        .gs-card:hover { border-color: var(--blue); box-shadow: 0 2px 12px rgba(9,105,218,0.1); }
        .gs-card .gs-icon { font-size: 2em; margin-bottom: 10px; }
        .gs-card h3 { font-size: 1em; font-weight: 600; margin-bottom: 4px; }
        .gs-card .gs-format { font-family: 'SF Mono', SFMono-Regular, ui-monospace, Menlo, monospace; font-size: 0.78em; color: var(--blue); margin-bottom: 8px; }
        .gs-card .desc { color: var(--gray-500); font-size: 0.85em; flex: 1; }
        .gs-card .gs-action {
            margin-top: 12px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: var(--blue);
            font-size: 0.85em;
            font-weight: 500;
        }
        .gs-tip {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 16px 20px;
            margin: 16px 0;
            font-size: 0.9em;
        }
        .gs-tip h4 { font-size: 0.95em; font-weight: 600; margin-bottom: 6px; }
        .gs-tip p { color: var(--gray-500); }
        .gs-tip code {
            background: var(--code-bg);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.88em;
        }

        /* SDK section */
        .sdk-box {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 24px;
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        .sdk-box .sdk-icon { font-size: 2.2em; flex-shrink: 0; }
        .sdk-box p { color: var(--gray-500); font-size: 0.95em; }
        .sdk-box a { color: var(--blue); text-decoration: none; }
        .sdk-box a:hover { text-decoration: underline; }
        .sdk-links { margin-top: 10px; display: flex; gap: 16px; flex-wrap: wrap; }
        .sdk-links a {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: var(--blue);
            font-size: 0.9em;
            font-weight: 500;
            text-decoration: none;
        }
        .sdk-links a:hover { text-decoration: underline; }

        /* Setup block */
        .setup-block {
            background: var(--card-bg);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            margin: 16px 0;
            overflow: hidden;
        }
        .setup-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
        }
        .setup-header h3 { font-size: 0.95em; font-weight: 600; }
        .copy-btn {
            background: none;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            padding: 4px 10px;
            font-size: 0.8em;
            cursor: pointer;
            color: var(--gray-500);
            transition: color 0.15s, border-color 0.15s;
        }
        .copy-btn:hover { color: var(--blue); border-color: var(--blue); }
        pre {
            background: var(--pre-bg);
            color: var(--pre-fg);
            padding: 16px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.6;
            margin: 0;
        }
        pre .c { color: #8b949e; }

        /* Browse table */
        .browse-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        .browse-table th {
            text-align: left;
            padding: 10px 12px;
            background: var(--gray-50);
            border-bottom: 2px solid var(--gray-200);
            font-weight: 600;
            color: var(--gray-700);
        }
        .browse-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--gray-100);
        }
        .browse-table tr:hover td { background: var(--gray-100); }
        .browse-table a { color: var(--blue); text-decoration: none; }
        .browse-table a:hover { text-decoration: underline; }

        /* Tabs within sections */
        .tab-bar {
            display: flex;
            gap: 0;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--gray-200);
        }
        .tab-bar button {
            background: none;
            border: none;
            padding: 8px 16px;
            font-size: 0.9em;
            font-weight: 500;
            color: var(--gray-500);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: color 0.15s, border-color 0.15s;
        }
        .tab-bar button:hover { color: var(--gray-900); }
        .tab-bar button.active { color: var(--blue); border-bottom-color: var(--blue); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Info box */
        .info-box {
            background: var(--info-bg);
            border: 1px solid var(--info-border);
            border-radius: var(--radius);
            padding: 16px 20px;
            margin: 16px 0;
            font-size: 0.9em;
            color: var(--info-color);
        }

        /* Loading */
        .loading { color: var(--gray-500); font-style: italic; padding: 20px 0; }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray-500);
            font-size: 0.85em;
            border-top: 1px solid var(--gray-100);
            margin-top: 20px;
        }
        footer a { color: var(--gray-500); }
        footer a:hover { color: var(--blue); }
        footer .footer-disclaimer {
            margin-top: 8px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Theme toggle */
        .theme-toggle {
            background: none;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            padding: 6px 10px;
            cursor: pointer;
            font-size: 1em;
            line-height: 1;
            color: var(--gray-500);
            transition: border-color 0.15s;
            margin-left: 8px;
        }
        .theme-toggle:hover { border-color: var(--blue); }

        /* Responsive */
        @media (max-width: 640px) {
            .hero { padding: 36px 16px 32px; }
            .hero h1 { font-size: 1.8em; }
            .nav a { padding: 10px 12px; font-size: 0.82em; }
            .pkg-grid, .player-grid { grid-template-columns: 1fr; }
            .gs-grid { grid-template-columns: 1fr 1fr; }
            .sdk-box { flex-direction: column; gap: 12px; }
        }
        @media (max-width: 480px) {
            .gs-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="hero">
    <h1>Xibo Players</h1>
    <p>Open-source digital signage players for Xibo CMS. Turn any PC, Raspberry Pi, or browser into a signage display.</p>
    <div class="hero-links">
        <a href="https://github.com/xibo-players">GitHub</a>
        <a href="#players">Players</a>
        <a href="#getting-started">Getting started</a>
        <a href="#setup">Install packages</a>
    </div>
    <div class="disclaimer">
        This is an independent community project. Not affiliated with
        <a href="https://xibosignage.com" style="color:inherit; text-decoration:underline;">Xibo Ltd</a>
        or the Xibo Digital Signage project. Xibo is a registered trademark of Xibo Ltd.
    </div>
</div>

<nav class="nav">
    <a href="#players">Players</a>
    <a href="#getting-started">Getting started</a>
    <a href="#sdk">SDK</a>
    <a href="#packages">Packages</a>
    <a href="#setup">Setup</a>
    <a href="#browse">Browse</a>
    <a href="#images">Images</a>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light theme" aria-label="Toggle theme">&#x1F319;</button>
</nav>

<div class="container">

    <!-- What's New -->
    <section id="whats-new">
        <h2>What's new in v0.4.0</h2>
        <p class="section-desc">Major feature release with 15+ new capabilities across the SDK and PWA player.</p>
        <div class="pkg-grid">
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x1F4FA;</span> Multi-display sync</h3>
                <p class="desc">BroadcastChannel-based lead/follower synchronization for video walls. Synchronized video start across displays.</p>
            </div>
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x26C5;</span> Weather &amp; geolocation</h3>
                <p class="desc">Weather-based schedule criteria for conditional content. Geolocation fallback chain: browser → Google API → IP lookup.</p>
            </div>
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x1F3B5;</span> Audio &amp; rendering</h3>
                <p class="desc">Audio widget with overlay visualization, image scaleType/align/valign, region exit transitions, and renderer pause/resume control.</p>
            </div>
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x23ED;</span> Playback control</h3>
                <p class="desc">Keyboard shortcuts and timeline click-to-skip for layout navigation. Pause/resume, next/previous, revert to schedule.</p>
            </div>
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x1F4CA;</span> Schedule &amp; stats</h3>
                <p class="desc">Conflict detection, interleaved default layouts, scheduled commands, event-based proof of play, and log batching.</p>
            </div>
            <div class="pkg-card" style="cursor:default;">
                <h3><span class="icon">&#x1F3F7;</span> CMS integration</h3>
                <p class="desc">Display tag config parsing, licence result handling, and REST weather endpoint support.</p>
            </div>
        </div>
    </section>

    <!-- Players -->
    <section id="players">
        <h2>Choose your player</h2>
        <p class="section-desc">Five ways to run Xibo on your hardware. The PWA engine powers all players — pick the shell that fits your deployment.</p>

        <div class="player-grid">
            <a class="player-card featured" href="https://github.com/xibo-players/xiboplayer-pwa">
                <h3><span class="icon">&#x1F4F1;</span> PWA Player</h3>
                <div class="player-mono">@xiboplayer/pwa</div>
                <p class="desc">Lightweight browser-based player and the engine that powers all other players. Offline-first with Service Worker caching. Supports video, images, audio, PDF, text/tickers, web pages, HLS streaming, multi-display sync, and playback control.</p>
                <div class="meta">
                    <span class="badge">Browser</span>
                    <span class="badge">npm</span>
                </div>
            </a>
            <a class="player-card" href="https://github.com/xibo-players/xiboplayer-electron">
                <h3><span class="icon">&#x26A1;</span> Electron Player</h3>
                <div class="player-mono">xiboplayer-electron</div>
                <p class="desc">Desktop app wrapping the PWA player. Best for development and testing. Standalone window with DevTools access and automatic CMS registration.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                </div>
            </a>
            <a class="player-card" href="https://github.com/xibo-players/xiboplayer-chromium">
                <h3><span class="icon">&#x1F310;</span> Chromium Kiosk</h3>
                <div class="player-mono">xiboplayer-chromium</div>
                <p class="desc">Locked-down Chromium browser running the PWA. Lightweight alternative when Electron is not needed. Minimal resource usage.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge">noarch</span>
                </div>
            </a>
            <a class="player-card" href="https://github.com/xibo-players/xibo-kiosk">
                <h3><span class="icon">&#x1F5A5;</span> Xibo Kiosk</h3>
                <div class="player-mono">xibo-kiosk</div>
                <p class="desc">Complete kiosk operating system. GNOME Kiosk session with auto-login, first-boot registration wizard, health monitoring, and dunst notifications. Pre-built bootable images for PCs and Raspberry Pi.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                    <span class="badge arch">aarch64</span>
                </div>
            </a>
            <a class="player-card" href="https://github.com/xibo-players/arexibo">
                <h3><img src="https://github.com/birkenfeld/arexibo/blob/master/assets/logo.png?raw=true" alt="" width="22" height="22" style="vertical-align:middle;"> arexibo</h3>
                <div class="player-mono">arexibo</div>
                <p class="desc">Native Rust-based player with Qt6 WebEngine. High performance, dual architecture. Independent from the PWA engine.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                    <span class="badge arch">aarch64</span>
                </div>
            </a>
        </div>
    </section>

    <!-- Getting Started -->
    <section id="getting-started">
        <h2>Getting started</h2>
        <p class="section-desc">The fastest way to get a signage display running. Pick your hardware, download an image, flash and boot — no Linux experience needed.</p>

        <div class="gs-grid">
            <a class="gs-card" href="https://github.com/xibo-players/xibo-kiosk/releases/latest">
                <div class="gs-icon">&#x1F5A5;</div>
                <h3>PC or laptop</h3>
                <div class="gs-format">Installer ISO</div>
                <p class="desc">Flash the ISO to a USB stick with <strong>Balena Etcher</strong> or <code>dd</code>. Boot from USB — the installer formats the disk and sets everything up automatically. Remove USB and reboot.</p>
                <div class="gs-action">Download ISO &#x2192;</div>
            </a>
            <a class="gs-card" href="https://github.com/xibo-players/xibo-kiosk/releases/latest">
                <div class="gs-icon">&#x1F353;</div>
                <h3>Raspberry Pi 4/5</h3>
                <div class="gs-format">Raw image (aarch64)</div>
                <p class="desc">Flash the <code>.raw.xz</code> image directly to an SD card with <strong>Balena Etcher</strong> or <code>dd</code>. Insert the card, power on, and the kiosk boots ready to use.</p>
                <div class="gs-action">Download aarch64 &#x2192;</div>
            </a>
            <a class="gs-card" href="https://github.com/xibo-players/xibo-kiosk/releases/latest">
                <div class="gs-icon">&#x1F4BB;</div>
                <h3>Virtual machine</h3>
                <div class="gs-format">QCOW2</div>
                <p class="desc">Ready-to-boot VM image. Open in <strong>GNOME Boxes</strong>, <strong>virt-manager</strong>, <strong>Proxmox</strong>, or run directly with <strong>QEMU</strong>. No installation needed.</p>
                <div class="gs-action">Download QCOW2 &#x2192;</div>
            </a>
            <a class="gs-card" href="https://github.com/xibo-players/xibo-kiosk/releases/latest">
                <div class="gs-icon">&#x1F527;</div>
                <h3>Intel NUC / embedded</h3>
                <div class="gs-format">Raw image (x86_64)</div>
                <p class="desc">Write the <code>.raw.xz</code> image directly to the internal SSD or SD card with <strong>Balena Etcher</strong> or <code>dd</code>. Same as the Pi image but for Intel/AMD hardware.</p>
                <div class="gs-action">Download x86_64 &#x2192;</div>
            </a>
        </div>

        <div class="gs-tip">
            <h4>After booting</h4>
            <p>
                Log in with user <code>xibo</code> / password <code>xibo</code>.
                Change your password with <code>passwd</code>.
                Connect to your Xibo CMS from the kiosk setup screen — the display registers automatically and starts playing your scheduled content.
            </p>
        </div>

        <div class="gs-tip">
            <h4>Already have Fedora or Ubuntu?</h4>
            <p>
                You don't need a kiosk image — just install the player packages directly.
                Jump to the <a href="#setup" style="color:var(--blue);">repository setup</a> to add our DNF/APT repo and install with a single command.
            </p>
        </div>
    </section>

    <!-- SDK -->
    <section id="sdk">
        <h2>SDK</h2>
        <p class="section-desc">The building blocks behind every player.</p>

        <div class="sdk-box">
            <div class="sdk-icon">&#x1F9F1;</div>
            <div>
                <p>
                    All players are built on the <strong>@xiboplayer SDK</strong> — 13 modular TypeScript packages for
                    caching, rendering, scheduling, multi-display sync, XMDS/SOAP + REST communication, XMR real-time commands,
                    statistics, and more. 1169 tests across 31 suites. Each package is published independently to npm.
                </p>
                <div class="sdk-links">
                    <a href="https://github.com/xibo-players/xiboplayer">&#x1F4E6; GitHub</a>
                    <a href="https://www.npmjs.com/org/xiboplayer">&#x1F4E6; npm packages</a>
                    <a href="https://github.com/xibo-players/xiboplayer/tree/main/mcp-server">&#x1F916; MCP Server</a>
                    <a href="https://github.com/xibo-players/xibo-players.github.io/blob/main/docs/FEATURE_COMPARISON.md">&#x1F4CA; Feature comparison</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Packages -->
    <section id="packages">
        <h2>Available packages</h2>
        <p class="section-desc">All packages are available for Fedora 43 (RPM). Select packages also support Ubuntu 24.04 (DEB).</p>

        <div class="pkg-grid">
            <a class="pkg-card" href="https://github.com/xibo-players/xibo-kiosk">
                <h3><span class="icon">&#x1F5A5;</span> xibo-kiosk</h3>
                <p class="desc">GNOME Kiosk session with auto-login, first-boot registration wizard, health monitoring, dunst notifications, and keyd shortcuts.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                    <span class="badge arch">aarch64</span>
                    <span class="badge">noarch</span>
                </div>
            </a>
            <a class="pkg-card" href="https://github.com/xibo-players/xiboplayer-electron">
                <h3><span class="icon">&#x26A1;</span> xiboplayer-electron</h3>
                <p class="desc">Electron-based Xibo player with offline support, service worker caching, and automatic CMS registration.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                </div>
            </a>
            <a class="pkg-card" href="https://github.com/xibo-players/xiboplayer-chromium">
                <h3><span class="icon">&#x1F310;</span> xiboplayer-chromium</h3>
                <p class="desc">Chromium kiosk wrapper that runs the Xibo PWA player in a locked-down browser window.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge">noarch</span>
                </div>
            </a>
            <a class="pkg-card" href="https://github.com/xibo-players/arexibo">
                <h3><img src="https://github.com/birkenfeld/arexibo/blob/master/assets/logo.png?raw=true" alt="" width="22" height="22" style="vertical-align:middle;"> arexibo</h3>
                <p class="desc">Native Rust-based Xibo player with Qt6 WebEngine. High performance, dual architecture.</p>
                <div class="meta">
                    <span class="badge rpm">RPM</span>
                    <span class="badge deb">DEB</span>
                    <span class="badge arch">x86_64</span>
                    <span class="badge arch">aarch64</span>
                </div>
            </a>
        </div>
    </section>

    <!-- Setup -->
    <section id="setup">
        <h2>Repository setup</h2>
        <p class="section-desc">Add the repository once, then install any package with your system package manager.</p>

        <div class="tab-bar" data-tabs="setup">
            <button class="active" data-tab="fedora">Fedora (DNF)</button>
            <button data-tab="ubuntu">Ubuntu (APT)</button>
        </div>

        <div class="tab-content active" data-tab-content="fedora">
            <div class="info-box">
                A single repository serves all xibo-players packages. RPM metadata is hosted here; actual packages are downloaded directly from each project's GitHub Releases.
            </div>
            <div class="setup-block">
                <div class="setup-header">
                    <h3>1. Add the repository</h3>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre id="dnf-add"><span class="c"># Install the xiboplayer repository and GPG key</span>
sudo dnf install \
  https://dnf.xiboplayer.org/rpm/fedora/43/noarch/xiboplayer-release-43-1.fc43.noarch.rpm</pre>
            </div>
            <div class="setup-block">
                <div class="setup-header">
                    <h3>2. Install packages</h3>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><span class="c"># Install one or more packages</span>
sudo dnf install xibo-kiosk
sudo dnf install xiboplayer-electron
sudo dnf install xiboplayer-chromium
sudo dnf install arexibo</pre>
            </div>
            <div class="setup-block">
                <div class="setup-header">
                    <h3>3. Start the kiosk session</h3>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><span class="c"># Enable auto-login on tty1 (reboot to start)</span>
sudo systemctl set-default graphical.target
<span class="c"># The kiosk session starts automatically on the next boot</span></pre>
            </div>
        </div>

        <div class="tab-content" data-tab-content="ubuntu">
            <div class="info-box">
                DEB packages are served directly from this repository. Currently available: <strong>xibo-kiosk</strong>, <strong>xiboplayer-chromium</strong>, <strong>xiboplayer-electron</strong>, <strong>arexibo</strong>.
            </div>
            <div class="setup-block">
                <div class="setup-header">
                    <h3>1. Add the repository</h3>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><span class="c"># Download and install the xiboplayer repository and GPG key</span>
curl -fsSLO https://dnf.xiboplayer.org/deb/ubuntu/24.04/all/xiboplayer-release_1.0.0_all.deb
sudo apt install ./xiboplayer-release_1.0.0_all.deb</pre>
            </div>
            <div class="setup-block">
                <div class="setup-header">
                    <h3>2. Install packages</h3>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><span class="c"># Update and install</span>
sudo apt update
sudo apt install xibo-kiosk</pre>
            </div>
        </div>
    </section>

    <!-- Browse -->
    <section id="browse">
        <h2>Browse packages</h2>
        <p class="section-desc">View all packages available in the repository.</p>

        <div class="tab-bar" data-tabs="browse">
            <button class="active" data-tab="browse-rpm">RPM packages</button>
            <button data-tab="browse-deb">DEB packages</button>
        </div>

        <div class="tab-content active" data-tab-content="browse-rpm">
            <div class="tab-bar" id="rpm-arch-filter"></div>
            <div id="rpm-list" class="loading">Loading RPM package list...</div>
        </div>

        <div class="tab-content" data-tab-content="browse-deb">
            <div class="tab-bar" id="deb-arch-filter"></div>
            <div id="deb-list" class="loading">Loading DEB package list...</div>
        </div>

    </section>

    <!-- Images -->
    <section id="images">
        <h2>Kiosk images</h2>
        <p class="section-desc">Pre-built bootable images — no Linux install needed. Download, flash to USB or SD card, boot and your kiosk is ready. See <a href="#getting-started" style="color:var(--blue);">Getting started</a> for step-by-step instructions.</p>

        <div id="images-list" class="loading">Loading kiosk images...</div>
    </section>

    <!-- How it works -->
    <section id="how">
        <h2>How it works</h2>
        <p class="section-desc">Architecture of the package repository.</p>

        <div class="setup-block" style="padding:20px;">
            <p style="margin-bottom:12px;">This is a <strong>unified package repository</strong> serving all xibo-players projects from a single URL.</p>

            <table class="browse-table" style="margin:16px 0;">
                <tr>
                    <th style="width:100px;">Format</th>
                    <th>How packages are served</th>
                </tr>
                <tr>
                    <td><span class="badge rpm">RPM</span></td>
                    <td>Repository metadata (repodata XML) is hosted here. When <code style="background:var(--code-bg);padding:2px 6px;border-radius:3px;font-size:0.85em;">dnf install</code> runs, it reads metadata from this site but downloads the actual <code style="background:var(--code-bg);padding:2px 6px;border-radius:3px;font-size:0.85em;">.rpm</code> files directly from each project's <a href="https://github.com/xibo-players">GitHub Releases</a>. This keeps the repository lightweight.</td>
                </tr>
                <tr>
                    <td><span class="badge deb">DEB</span></td>
                    <td>Both metadata and <code style="background:var(--code-bg);padding:2px 6px;border-radius:3px;font-size:0.85em;">.deb</code> packages are hosted directly in this repository. APT downloads everything from here.</td>
                </tr>
            </table>

            <p style="font-size:0.9em; color:var(--gray-500);">Each project's CI automatically publishes to this central repository on every release. Repository metadata is rebuilt and merged by GitHub Actions.</p>
        </div>
    </section>

</div>

<footer>
    <p>
        <a href="https://github.com/xibo-players">github.com/xibo-players</a>
        &middot; Open-source digital signage
        &middot; Powered by <a href="https://pages.github.com">GitHub Pages</a>
    </p>
    <p class="footer-disclaimer">
        Not affiliated with Xibo Ltd. Xibo is a registered trademark of Xibo Ltd.
    </p>
</footer>

<script>
// Tabs
document.querySelectorAll('.tab-bar').forEach(bar => {
    bar.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
            const group = bar.dataset.tabs;
            bar.querySelectorAll('button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const parent = bar.parentElement;
            parent.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            parent.querySelector(`[data-tab-content="${btn.dataset.tab}"]`).classList.add('active');
        });
    });
});

// Copy to clipboard
function copyCode(btn) {
    const pre = btn.closest('.setup-block').querySelector('pre');
    const text = pre.textContent;
    navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy', 2000);
    });
}

// Sticky nav highlight
const sections = document.querySelectorAll('section[id]');
const navLinks = document.querySelectorAll('.nav a');
window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(s => {
        if (window.scrollY >= s.offsetTop - 80) current = s.id;
    });
    navLinks.forEach(a => {
        a.classList.toggle('active', a.getAttribute('href') === '#' + current);
    });
});

// --- Architecture filtering ---
function renderArchFilter(filterEl, archs, activeArch, onSelect) {
    filterEl.innerHTML = '';
    archs.forEach(function(arch) {
        var btn = document.createElement('button');
        btn.textContent = arch;
        if (activeArch === arch) btn.classList.add('active');
        btn.onclick = function() { onSelect(arch); };
        filterEl.appendChild(btn);
    });
}

// --- DEB packages ---
var debData = [];
var debArch = 'amd64';

function renderDebTable() {
    var el = document.getElementById('deb-list');
    var filtered = debArch ? debData.filter(function(p) { return p.Architecture === debArch || p.Architecture === 'all'; }) : debData;
    if (filtered.length === 0) { el.innerHTML = '<p style="color:var(--gray-500)">No packages for this architecture.</p>'; return; }
    var html = '<table class="browse-table"><thead><tr><th>Package</th><th>Version</th><th>Arch</th><th>Size</th><th>Description</th></tr></thead><tbody>';
    filtered.forEach(function(p) {
        var bytes = parseInt(p.Size) || 0;
        var size = !bytes ? '—' : bytes > 1048576 ? (bytes / 1048576).toFixed(1) + ' MB' : (bytes / 1024).toFixed(1) + ' KB';
        var homepage = p.Homepage || '#';
        var desc = (p.Description || '').split('\n')[0];
        var note = p._releaseOnly ? ' <span class="badge" style="font-size:0.7em;">GitHub Release</span>' : '';
        html += '<tr><td><a href="' + homepage + '">' + (p.Package || '?') + '</a>' + note + '</td>' +
            '<td>' + (p.Version || '?') + '</td>' +
            '<td><span class="badge arch">' + (p.Architecture || '?') + '</span></td>' +
            '<td>' + size + '</td><td>' + desc + '</td></tr>';
    });
    el.innerHTML = html + '</tbody></table>';
}

function setupDebFilter() {
    var archs = ['amd64', 'arm64'];
    var filterEl = document.getElementById('deb-arch-filter');
    function update(arch) { debArch = arch; renderArchFilter(filterEl, archs, debArch, update); renderDebTable(); }
    renderArchFilter(filterEl, archs, debArch, update);
    renderDebTable();
}

async function loadDebPackages() {
    var el = document.getElementById('deb-list');
    try {
        var urls = ['/deb/ubuntu/24.04/all/Packages', '/deb/ubuntu/24.04/amd64/Packages', '/deb/ubuntu/24.04/arm64/Packages'];
        var pkgs = new Map();
        for (var i = 0; i < urls.length; i++) {
            var resp = await fetch(urls[i]);
            if (!resp.ok) continue;
            var text = await resp.text();
            if (!text.trim()) continue;
            text.trim().split('\n\n').forEach(function(block) {
                var fields = {}, lastKey = '';
                block.split('\n').forEach(function(line) {
                    if (line.startsWith(' ')) { if (lastKey) fields[lastKey] += '\n' + line; }
                    else { var idx = line.indexOf(': '); if (idx > 0) { lastKey = line.substring(0, idx); fields[lastKey] = line.substring(idx + 2); } }
                });
                var key = fields.Package + '-' + fields.Version + '-' + fields.Architecture;
                if (!pkgs.has(key)) pkgs.set(key, fields);
            });
        }
        // Also fetch DEBs from GitHub Releases (packages too large for apt repo)
        var ghRepos = [{ name: 'xiboplayer-electron', repo: 'xibo-players/xiboplayer-electron' }];
        for (var j = 0; j < ghRepos.length; j++) {
            try {
                var r = await fetch('https://api.github.com/repos/' + ghRepos[j].repo + '/releases/latest');
                if (!r.ok) continue;
                var rel = await r.json();
                (rel.assets || []).filter(function(a) { return a.name.endsWith('.deb'); }).forEach(function(deb) {
                    var arch = deb.name.includes('_amd64') ? 'amd64' : deb.name.includes('_arm64') ? 'arm64' : 'all';
                    var ver = (rel.tag_name || '').replace(/^v/, '');
                    var key = ghRepos[j].name + '-' + ver + '-' + arch;
                    if (!pkgs.has(key)) pkgs.set(key, {
                        Package: ghRepos[j].name, Version: ver, Architecture: arch, Size: String(deb.size),
                        Homepage: 'https://github.com/' + ghRepos[j].repo,
                        Description: 'Electron-based Xibo player (install from GitHub Releases)', _releaseOnly: true
                    });
                });
            } catch (e) { /* skip */ }
        }
        debData = Array.from(pkgs.values());
        if (debData.length === 0) { el.innerHTML = '<p style="color:var(--gray-500)">No DEB packages found.</p>'; return; }
        setupDebFilter();
    } catch (e) {
        el.innerHTML = '<p style="color:var(--gray-500)">Could not load DEB packages.</p>';
    }
}

// --- RPM packages ---
var rpmData = [];
var rpmArch = 'x86_64';

function renderRpmTable() {
    var el = document.getElementById('rpm-list');
    var filtered = rpmArch ? rpmData.filter(function(p) { return p.arch === rpmArch || p.arch === 'noarch'; }) : rpmData;
    if (filtered.length === 0) { el.innerHTML = '<p style="color:var(--gray-500)">No packages for this architecture.</p>'; return; }
    var html = '<table class="browse-table"><thead><tr><th>Package</th><th>File</th><th>Size</th><th>Arch</th><th>Release</th></tr></thead><tbody>';
    filtered.forEach(function(r) {
        html += '<tr><td><a href="https://github.com/' + r.repo + '">' + r.name + '</a></td>' +
            '<td><a href="' + r.url + '">' + r.file + '</a></td>' +
            '<td>' + r.size + '</td><td><span class="badge arch">' + r.arch + '</span></td>' +
            '<td><a href="' + r.releaseUrl + '">' + r.tag + '</a></td></tr>';
    });
    el.innerHTML = html + '</tbody></table>';
}

function setupRpmFilter() {
    var archs = ['x86_64', 'aarch64'];
    var filterEl = document.getElementById('rpm-arch-filter');
    function update(arch) { rpmArch = arch; renderArchFilter(filterEl, archs, rpmArch, update); renderRpmTable(); }
    renderArchFilter(filterEl, archs, rpmArch, update);
    renderRpmTable();
}

async function loadRpmPackages() {
    var el = document.getElementById('rpm-list');
    var repos = [
        { name: 'xibo-kiosk', repo: 'xibo-players/xibo-kiosk' },
        { name: 'xiboplayer-electron', repo: 'xibo-players/xiboplayer-electron' },
        { name: 'xiboplayer-chromium', repo: 'xibo-players/xiboplayer-chromium' },
        { name: 'arexibo', repo: 'xibo-players/arexibo' },
    ];
    for (var i = 0; i < repos.length; i++) {
        try {
            var resp = await fetch('https://api.github.com/repos/' + repos[i].repo + '/releases/latest');
            if (!resp.ok) continue;
            var release = await resp.json();
            (release.assets || []).filter(function(a) { return a.name.endsWith('.rpm'); }).forEach(function(rpm) {
                var arch = rpm.name.includes('.x86_64.') ? 'x86_64' : rpm.name.includes('.aarch64.') ? 'aarch64' : rpm.name.includes('.noarch.') ? 'noarch' : '?';
                var rpmSize = rpm.size > 1048576 ? (rpm.size / 1048576).toFixed(1) + ' MB' : (rpm.size / 1024).toFixed(0) + ' KB';
                rpmData.push({ name: repos[i].name, repo: repos[i].repo, file: rpm.name, url: rpm.browser_download_url, size: rpmSize, arch: arch, tag: release.tag_name, releaseUrl: release.html_url });
            });
        } catch (e) { /* skip */ }
    }
    if (rpmData.length === 0) { el.innerHTML = '<p style="color:var(--gray-500)">No RPM releases found yet.</p>'; return; }
    setupRpmFilter();
}

// Theme toggle
function toggleTheme() {
    const html = document.documentElement;
    const current = html.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateToggleIcon(next);
}
function updateToggleIcon(theme) {
    const btn = document.querySelector('.theme-toggle');
    if (btn) btn.innerHTML = theme === 'dark' ? '&#x2600;' : '&#x1F319;';
}
// Init theme: saved preference > system preference > light
(function() {
    const saved = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = saved || (prefersDark ? 'dark' : 'light');
    if (theme === 'dark') document.documentElement.setAttribute('data-theme', 'dark');
    updateToggleIcon(theme);
})();

// Fetch kiosk images from GitHub Releases
async function loadKioskImages() {
    const el = document.getElementById('images-list');
    try {
        const resp = await fetch('https://api.github.com/repos/xibo-players/xibo-kiosk/releases/latest');
        if (!resp.ok) throw new Error('No release');
        const release = await resp.json();
        const images = (release.assets || []).filter(a =>
            a.name.endsWith('.iso') || a.name.endsWith('.qcow2') || a.name.endsWith('.raw.xz') || a.name.endsWith('.xz')
        );
        if (images.length === 0) {
            el.innerHTML = '<div class="pkg-grid">' +
                '<div class="pkg-card" style="cursor:default;"><h3>No images yet</h3>' +
                '<p class="desc">Kiosk images will appear here after the first tagged release.</p></div></div>';
            return;
        }
        let html = '<table class="browse-table"><thead><tr><th>Image</th><th>Format</th><th>Use case</th><th>Size</th><th>Arch</th><th>Release</th></tr></thead><tbody>';
        for (const img of images) {
            const size = img.size > 1073741824 ? (img.size / 1073741824).toFixed(1) + ' GB' : img.size > 1048576 ? (img.size / 1048576).toFixed(0) + ' MB' : (img.size / 1024).toFixed(0) + ' KB';
            const arch = img.name.includes('x86_64') ? 'x86_64'
                : img.name.includes('aarch64') ? 'aarch64' : '—';
            const isIso = img.name.endsWith('.iso');
            const isQcow = img.name.endsWith('.qcow2');
            const isRaw = img.name.endsWith('.raw.xz');
            const isArm = img.name.includes('aarch64');
            const fmt = isIso ? 'ISO installer'
                : isQcow ? 'QCOW2'
                : isRaw ? 'Raw disk'
                : img.name.endsWith('.xz') ? 'Compressed' : 'Image';
            const useCase = isIso ? 'Flash to USB, boot on any PC — fully automated install'
                : isQcow ? 'Ready-to-boot VM for GNOME Boxes, virt-manager, Proxmox, QEMU'
                : (isRaw && isArm) ? 'Flash to SD card for Raspberry Pi 4/5 or ARM boards'
                : isRaw ? 'Write to SSD or SD card for Intel NUCs, embedded PCs'
                : '';
            html += '<tr>' +
                '<td><a href="' + img.browser_download_url + '">' + img.name + '</a></td>' +
                '<td>' + fmt + '</td>' +
                '<td style="color:var(--gray-500);font-size:0.85em;">' + useCase + '</td>' +
                '<td>' + size + '</td>' +
                '<td><span class="badge arch">' + arch + '</span></td>' +
                '<td><a href="' + release.html_url + '">' + release.tag_name + '</a></td>' +
                '</tr>';
        }
        html += '</tbody></table>';
        html += '<div style="margin-top:16px; font-size:0.85em; color:var(--gray-500);">' +
            '<p>All images include: GNOME Kiosk session, auto-login, xibo-kiosk + xiboplayer-electron pre-installed. ' +
            'Default login: <code style="background:var(--code-bg);padding:2px 6px;border-radius:3px;">xibo</code> / <code style="background:var(--code-bg);padding:2px 6px;border-radius:3px;">xibo</code> — change your password after first boot.</p>' +
            '<p style="margin-top:6px;">Use <a href="https://etcher.balena.io/" style="color:var(--blue);">Balena Etcher</a> for an easy graphical tool to flash any image. ' +
            '<a href="https://github.com/xibo-players/xibo-kiosk/releases" style="color:var(--blue);">All releases</a></p>' +
            '</div>';
        el.innerHTML = html;
    } catch (e) {
        el.innerHTML = '<div class="pkg-grid">' +
            '<div class="pkg-card" style="cursor:default;"><h3>Kiosk images</h3>' +
            '<p class="desc">Images are available from <a href="https://github.com/xibo-players/xibo-kiosk/releases">GitHub Releases</a>.</p></div></div>';
    }
}

// Load package lists
loadDebPackages();
loadRpmPackages();
loadKioskImages();
</script>

</body>
</html>
